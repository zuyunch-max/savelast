<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>SaveLast - Anime Watch Log</title>

<style>
:root {
  --bg: #0f172a;
  --card: #1e293b;
  --text: #e5e7eb;
  --btn: #22c55e;
}

.light {
  --bg: #f8fafc;
  --card: #e2e8f0;
  --text: #020617;
  --btn: #16a34a;
}

body {
  font-family: Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  padding: 20px;
  transition: 0.3s;
}

h1 {
  text-align: center;
}

input, select, button {
  width: 100%;
  padding: 8px;
  margin: 6px 0;
  border-radius: 6px;
  border: none;
  font-size: 14px;
}

button {
  background: var(--btn);
  font-weight: bold;
  cursor: pointer;
}

.card {
  background: var(--card);
  padding: 12px;
  border-radius: 8px;
  margin-top: 10px;
}

small {
  opacity: 0.7;
}

.toggle {
  margin-bottom: 10px;
}
</style>
</head>

<body>

<h1>ğŸ“º SaveLast</h1>

<button class="toggle" onclick="gantiTema()">ğŸŒ™ / â˜€ï¸ Ganti Tema</button>

<input id="judul" placeholder="Judul Anime (contoh: 99 Tahun Hidup)">
<input id="season" placeholder="Season Terakhir (contoh: 2)">
<input id="episode" placeholder="Episode Terakhir">

<select id="status">
  <option value="Ongoing">Ongoing</option>
  <option value="Tamat">Tamat</option>
</select>

<select id="sort" onchange="sortData()">
  <option value="">-- Urutkan Judul --</option>
  <option value="az">0â€“9 lalu Aâ€“Z</option>
  <option value="za">Zâ€“A lalu 9â€“0</option>
</select>

<button onclick="simpan()">Simpan</button>

<div id="list"></div>

<script>
let data = JSON.parse(localStorage.getItem("animeLog")) || [];
let tema = localStorage.getItem("tema") || "dark";

if (tema === "light") {
  document.body.classList.add("light");
}

function gantiTema() {
  document.body.classList.toggle("light");
  tema = document.body.classList.contains("light") ? "light" : "dark";
  localStorage.setItem("tema", tema);
}

function simpan() {
  let judul = document.getElementById("judul").value.trim();
  let season = document.getElementById("season").value.trim();
  let episode = document.getElementById("episode").value.trim();
  let status = document.getElementById("status").value;

  if (!judul || !season || !episode) {
    alert("Judul, season, dan episode harus diisi!");
    return;
  }

  data.unshift({
    judul,
    season,
    episode,
    status,
    waktu: new Date().toLocaleString()
  });

  localStorage.setItem("animeLog", JSON.stringify(data));
  render();

  document.getElementById("judul").value = "";
  document.getElementById("season").value = "";
  document.getElementById("episode").value = "";
}

function sortData() {
  let type = document.getElementById("sort").value;

  if (type === "az") {
    data.sort((a, b) => {
      let aIsNum = /^\d/.test(a.judul);
      let bIsNum = /^\d/.test(b.judul);

      if (aIsNum && !bIsNum) return -1;
      if (!aIsNum && bIsNum) return 1;

      return a.judul.localeCompare(b.judul, 'id', { sensitivity: 'base' });
    });
  }

  if (type === "za") {
    data.sort((a, b) => {
      let aIsNum = /^\d/.test(a.judul);
      let bIsNum = /^\d/.test(b.judul);

      if (aIsNum && !bIsNum) return 1;
      if (!aIsNum && bIsNum) return -1;

      return b.judul.localeCompare(a.judul, 'id', { sensitivity: 'base' });
    });
  }

  localStorage.setItem("animeLog", JSON.stringify(data));
  render();
}

function render() {
  let list = document.getElementById("list");
  list.innerHTML = "";

  data.forEach((a, i) => {
    list.innerHTML += `
      <div class="card">
        <b>${a.judul}</b><br>
        Season: ${a.season}<br>
        Episode: ${a.episode}<br>
        Status: ${a.status}<br>
        <small>${a.waktu}</small><br><br>
        <button onclick="hapus(${i})">Hapus</button>
      </div>
    `;
  });
}

function hapus(i) {
  data.splice(i, 1);
  localStorage.setItem("animeLog", JSON.stringify(data));
  render();
}

render();
</script>

</body>
</html>
